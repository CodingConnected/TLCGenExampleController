1.
vertraag_kar_uitm[] is een globale bool array, lengte array = prioFCMAX
deze array dient geinitialiseerd te worden op FALSE in init_application()


2.
toevoeging extra functie in header file "extra_func_prio.h"
boolv DSIMeldingPRIO_V2(count fc, count prio_fc, count dslus, count vtgtype, boolv checkfcnmr, count fcnmr, boolv checktype, count meldingtype, boolv extra);


3.
toevoeging extra functie in file "extra_func_prio.c"

boolv DSIMeldingPRIO_V2(                /* Fik220201 */
	count fc,                       /* fasecyclus */
	count prio_fc,                  /* index prioriteit */
	count dslus,                    /* lusnummer in Kar bericht */
	count vtgtype,                  /* voertuigtype */
	boolv checkfcnmr,               /* controleer fasecyclus nummer in Kar bericht */
	count fcnmr,                    /* ... -> ... fasecyclus nummer in Kar bericht */
	boolv checktype,                /* controleer meldingstype in Kar bericht */
	count meldingtype,              /* ... -> ... meldingstype in Kar bericht */
	boolv extra)                    /* */
{
        boolv melding = TRUE;

        /* Correctie uitmelding van eerste bus fc tijdens rood */
        if (vertraag_kar_uitm[prio_fc]) PrioUitmelden(prio_fc, SG[fc]); /* vertraagde uitmelding op start groen */
        if (SG[fc]) vertraag_kar_uitm[prio_fc] = FALSE;

#if !defined (VISSIM) && DSMAX
	if (!DS_MSG || !extra) melding = FALSE;
#endif

	if (dslus != NG && dslus   != CIF_DSI[CIF_DSI_LUS]) melding = FALSE;
	if (vtgtype > 0 && vtgtype != CIF_DSI[CIF_DSI_VTG]) melding = FALSE;
	if (checkfcnmr  &&       fcnmr != NG &&       fcnmr != CIF_DSI[CIF_DSI_DIR] ) melding = FALSE;
	if (checktype   && meldingtype != NG && meldingtype != CIF_DSI[CIF_DSI_TYPE]) melding = FALSE;

        /* uitmelding eerste bus tijdens rood, tijdens 1e seconde rood gaan we ervan uit dat de bus toch doorgereden is */
        if ( R[fc] && TR_timer[fc] > 10 && (!vertraag_kar_uitm[prio_fc] || iAantalInmeldingen[prio_fc] == 1) )
        {
          if ( iAantalInmeldingen[prio_fc] > 0 && dslus == 0 && CIF_DSI[CIF_DSI_TYPE] == CIF_DSUIT )
          {
            if (melding)
            {
	      vertraag_kar_uitm[prio_fc] = TRUE;    /* correctie, uitmelding vertragen tot start groen */
              melding                    = FALSE;   /* intrekken eerste uitmelding tijdens rood */
            }
         }
       }

       return melding;
}

4.
In de kxxxxprio.c dient de functie aanroep voor OV KAR uitmeldingen te worden gewijzigd (voorbeeld uitmelding richting 05)

    /* Uitmelding fc05 type Bus - OUD */
    IH[hpriouit05bus] = IH[hpriouit05buskar] = FALSE;
    if (SCH[schpriouit05buskar])
    {
        IH[hpriouit05buskar] = DSIMeldingPRIO_V1(0, PRM[prmvtgcat05bus], TRUE, PRM[prmkarsg05],TRUE, CIF_DSUIT, TRUE);
    }
    IH[hpriouit05bus] = IH[hpriouit05buskar];

    /* Uitmelding fc05 type Bus - NIEUW */
    IH[hpriouit05bus] = IH[hpriouit05buskar] = FALSE;
    if (SCH[schpriouit05buskar])
    {
        IH[hpriouit05buskar] = DSIMeldingPRIO_V2(fc05, prioFC05bus, 0, PRM[prmvtgcat05bus], TRUE, PRM[prmkarsg05],TRUE, CIF_DSUIT, TRUE);
    }
    IH[hpriouit05bus] = IH[hpriouit05buskar];

